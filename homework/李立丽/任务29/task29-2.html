<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
	<title>task29-2</title>
	<style>
		ul,li{
			padding:0;
			margin:0;
			list-style: none;
		}
		a{
			text-decoration: none;
		}
		.clearfix:after{
			content: '';
			display: block;
			clear: both;
		}
        .imgs{
        	width: 960px;
        	margin:0 auto;
        	overflow: hidden;
        }
        .imgs li{
        	float: left;
        	display: block;
        	margin-left: 10px;
        	margin-top: 10px;
        }
        .imgs img{
        	width: 300px;
        	height: 300px;
        }
	</style>
</head>
<body>
   <ul class="imgs clearfix">
   	<li>
   	    <a href="javascript:void(0)"><img src="loading.png" data-src="1.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="2.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="3.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="4.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="5.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="6.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="7.jpg" alt=""></a>
   	</li>
    <li>
   	    <a href="javascript:void(0)"><img src="loading.png" data-src="1.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="2.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="3.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="4.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="5.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="6.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="7.jpg" alt=""></a>
   	</li>
   	<li>
   	    <a href="javascript:void(0)"><img src="loading.png" data-src="1.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="2.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="3.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="4.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="5.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="6.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="7.jpg" alt=""></a>
   	</li>
   	<li>
   	    <a href="javascript:void(0)"><img src="loading.png" data-src="1.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="2.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="3.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="4.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="5.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="6.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="7.jpg" alt=""></a>
   	</li>
   	<li>
   	    <a href="javascript:void(0)"><img src="loading.png" data-src="1.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="2.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="3.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="4.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="5.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="6.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="7.jpg" alt=""></a>
   	</li>
   	<li>
   	    <a href="javascript:void(0)"><img src="loading.png" data-src="1.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="2.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="3.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="4.png" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="5.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="6.jpg" alt=""></a>
   	</li>
   	<li>
   		<a href="javascript:void(0)"><img src="loading.png" data-src="7.jpg" alt=""></a>
   	</li>
   </ul>

   <script src=http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js></script>
   <script>
           showImg();
           var clock;
           $(window).on("scroll",function(){
           	//设置定时器当事件触发一定时间后再执行
				if(clock){
					clearTimeout(clock);
				}
				clock = setTimeout(function(){
					showImg()
				},300)//每0.3秒执行一个showImg()
			});

	       function isVisible($node){
			    var nodeH = $node.height();
			    var offsetTop=$node.offset().top;
			    var winH=$(window).height();
				var scrollTop=$(window).scrollTop();						

				if(winH+scrollTop>offsetTop   && scrollTop<scrollTop+winH){//判断是否加载图片
		            return true;
		        }else{
		            return false;
		        }
			} 

			function showImg(){
				$('.imgs').find('img').each(function(){
					var $curImg = $(this);//each()方法的this指向当前正在遍历的函数
					if (isVisible($curImg)){
						$curImg.attr('src',$curImg.attr('data-src'));//把$curImg的data-src的值写入$curImg的src属性中，获取图片的真实地址
					}
				})
			}
   </script>

</body>
</html>